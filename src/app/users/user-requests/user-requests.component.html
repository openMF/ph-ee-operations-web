<span>{{ "labels.texts.Accept and Reject user requests" | translate }}</span>
<div class="container">
  <mat-card class="no-padding radius8">
    <mat-progress-bar mode="indeterminate" *ngIf="isLoading"></mat-progress-bar>
    <table mat-table [dataSource]="dataSource" matSort *ngIf="!isLoading">
      <ng-container matColumnDef="username">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <div class="column-label" *ngIf="!showFilter['username']; else usernameFilter">
            {{"labels.inputs.User Name"| translate}}
          </div>
          <ng-template #usernameFilter>
            <mat-form-field (click)="$event.stopPropagation()" class="column-label">
              <mat-label>{{"labels.inputs.User Name"| translate}}</mat-label>
              <input matInput (click)="$event.stopPropagation()"
                (keyup)="applyFilter($event.target.value, 'username')" />
            </mat-form-field>
          </ng-template>
          <mat-icon class="hidden-search-icon" (click)="toggleFilter('username'); $event.stopPropagation()">
            <fa-icon icon="search" size="2xs"></fa-icon>
          </mat-icon>
        </th>
        <td mat-cell *matCellDef="let user">{{ user.username }}</td>
      </ng-container>

      <ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <div class="column-label" *ngIf="!showFilter['email']; else emailFilter">
            {{"labels.inputs.Email"| translate}}
          </div>

          <ng-template #emailFilter>
            <mat-form-field (click)="$event.stopPropagation()" class="column-label">
              <mat-label>{{"labels.inputs.Email"| translate}}</mat-label>
              <input matInput (click)="$event.stopPropagation()" (keyup)="applyFilter($event.target.value, 'email')" />
            </mat-form-field>
          </ng-template>
          <mat-icon class="hidden-search-icon" (click)="toggleFilter('email'); $event.stopPropagation()">
            <fa-icon icon="search" size="2xs"></fa-icon>
          </mat-icon>
        </th>
        <td mat-cell *matCellDef="let user">{{ user.email }}</td>
      </ng-container>

      <ng-container matColumnDef="firstName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <div class="column-label" *ngIf="!showFilter['firstName']; else firstNameFilter">
            {{"labels.inputs.First Name"| translate}}
          </div>

          <ng-template #firstNameFilter>
            <mat-form-field (click)="$event.stopPropagation()" class="column-label">
              <mat-label>{{"labels.inputs.First Name"| translate}}</mat-label>
              <input matInput (click)="$event.stopPropagation()"
                (keyup)="applyFilter($event.target.value, 'firstName')" />
            </mat-form-field>
          </ng-template>
          <mat-icon class="hidden-search-icon" (click)="toggleFilter('firstName'); $event.stopPropagation()">
            <fa-icon icon="search" size="2xs"></fa-icon>
          </mat-icon>
        </th>
        <td mat-cell *matCellDef="let user">{{ user.firstName }}</td>
      </ng-container>

      <ng-container matColumnDef="lastName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <div class="column-label" *ngIf="!showFilter['lastName']; else lastNameFilter">
            {{"labels.inputs.Last Name"| translate}}
          </div>

          <ng-template #lastNameFilter>
            <mat-form-field (click)="$event.stopPropagation()" class="column-label">
              <mat-label>{{"labels.inputs.Last Name"| translate}}</mat-label>
              <input matInput (click)="$event.stopPropagation()"
                (keyup)="applyFilter($event.target.value, 'lastName')" />
            </mat-form-field>
          </ng-template>
          <mat-icon class="hidden-search-icon" (click)="toggleFilter('lastName'); $event.stopPropagation()">
            <fa-icon icon="search" size="2xs"></fa-icon>
          </mat-icon>

        </th>
        <td mat-cell *matCellDef="let user">{{ user.lastName }}</td>
      </ng-container>

      <ng-container matColumnDef="mobileNo">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <div class="column-label" *ngIf="!showFilter['mobileNo']; else mobileNoFilter">
            {{"labels.inputs.Mobile Number"| translate}}
          </div>

          <ng-template #mobileNoFilter>
            <mat-form-field (click)="$event.stopPropagation()" class="column-label">
              <mat-label>{{"labels.inputs.Mobile Number"| translate}}</mat-label>
              <input matInput (click)="$event.stopPropagation()"
                (keyup)="applyFilter($event.target.value, 'mobileNo')" />
            </mat-form-field>
          </ng-template>
          <mat-icon class="hidden-search-icon" (click)="toggleFilter('mobileNo'); $event.stopPropagation()">
            <fa-icon icon="search" size="2xs"></fa-icon>
          </mat-icon>

        </th>
        <td mat-cell *matCellDef="let user">{{ user.mobileNo }}</td>
      </ng-container>

      <ng-container matColumnDef="userType">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <div class="column-label" *ngIf="!showFilter['userType']; else userTypeFilter">
            {{"labels.inputs.ID"| translate}}
          </div>

          <ng-template #userTypeFilter>
            <mat-form-field (click)="$event.stopPropagation()" class="column-label">
              <mat-label>{{"labels.inputs.ID"| translate}}</mat-label>
              <input matInput (click)="$event.stopPropagation()"
                (keyup)="applyFilter($event.target.value, 'userType')" />
            </mat-form-field>
          </ng-template>
          <mat-icon class="hidden-search-icon" (click)="toggleFilter('userType'); $event.stopPropagation()">
            <fa-icon icon="search" size="2xs"></fa-icon>
          </mat-icon>


        </th>
        <td mat-cell *matCellDef="let user">
          {{ user.govtId || user.fspId || "N/A" }}
        </td>
      </ng-container>

      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <div class="column-label" *ngIf="!showFilter['id']; else idFilter">
            {{"labels.inputs.User Type"| translate}}
          </div>

          <ng-template #idFilter>
            <mat-form-field (click)="$event.stopPropagation()" class="column-label">
              <mat-label>{{"labels.inputs.User Type"| translate}}</mat-label>
              <input matInput (click)="$event.stopPropagation()" (keyup)="applyFilter($event.target.value, 'id')" />
            </mat-form-field>
          </ng-template>
          <mat-icon class="hidden-search-icon" (click)="toggleFilter('id'); $event.stopPropagation()">
            <fa-icon icon="search" size="2xs"></fa-icon>
          </mat-icon>

        </th>
        <td mat-cell *matCellDef="let user">{{ user.userType }}</td>
      
      </ng-container>

      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <div class="column-label" *ngIf="!showFilter['status']; else statusFilter">
            {{"labels.inputs.Status"| translate}}
          </div>

          <ng-template #statusFilter>
            <mat-form-field (click)="$event.stopPropagation()" class="column-label">
              <mat-label>{{"labels.inputs.Status"| translate}}</mat-label>
              <input matInput (click)="$event.stopPropagation()" (keyup)="applyFilter($event.target.value, 'status')" />
            </mat-form-field>
          </ng-template>
          <mat-icon class="hidden-search-icon" (click)="toggleFilter('status'); $event.stopPropagation()">
            <fa-icon icon="search" size="2xs"></fa-icon>
          </mat-icon>

        </th>
        <td mat-cell *matCellDef="let user">{{ user.status }}</td>
      </ng-container>

      <ng-container matColumnDef="actionType">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <div class="column-label" *ngIf="!showFilter['actionType']; else actionTypeFilter">
            {{"labels.inputs.Action Type"| translate}}
          </div>

          <ng-template #actionTypeFilter>
            <mat-form-field (click)="$event.stopPropagation()" class="column-label">
              <mat-label>{{"labels.inputs.Action Type"| translate}}</mat-label>
              <input matInput (click)="$event.stopPropagation()"
                (keyup)="applyFilter($event.target.value, 'actionType')" />
            </mat-form-field>
          </ng-template>
          <mat-icon class="hidden-search-icon" (click)="toggleFilter('actionType'); $event.stopPropagation()">
            <fa-icon icon="search" size="2xs"></fa-icon>
          </mat-icon>

        </th>
        <td mat-cell *matCellDef="let user">{{ user.actionType }}</td>
      </ng-container>

      <ng-container matColumnDef="roles">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          <div class="column-label" *ngIf="!showFilter['roles']; else rolesFilter">
            {{"labels.inputs.Role"| translate}}
          </div>

          <ng-template #rolesFilter>
            <mat-form-field (click)="$event.stopPropagation()" class="column-label">
              <mat-label>{{"labels.inputs.Roles"| translate}}</mat-label>
              <input matInput (click)="$event.stopPropagation()" (keyup)="applyFilter($event.target.value, 'roles')" />
            </mat-form-field>
          </ng-template>
          <mat-icon class="hidden-search-icon" (click)="toggleFilter('roles'); $event.stopPropagation()">
            <fa-icon icon="search" size="2xs"></fa-icon>
          </mat-icon>


        </th>
        <td mat-cell *matCellDef="let user">{{ user.roles }}</td>
      </ng-container>
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Actions</th>
        <td mat-cell *matCellDef="let user">
          <div fxLayoutAlign="start center" fxLayout="column" class="button-box">
            <button mat-button fxLayout="row" fxLayoutAlign="center center" class="button submit" (click)="approveRecord(user)">
              {{"labels.buttons.Approve"| translate}}
            </button>
            <button mat-button fxLayout="row" fxLayoutAlign="center center" class="button" (click)="delRecord(user)">
              {{"labels.buttons.Reject"| translate}}
            </button>
          </div>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

      <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell" [attr.colspan]="displayedColumns.length">
          {{"labels.texts.No data found."| translate}}
        </td>
      </tr>
    </table>

    <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
  </mat-card>
</div>